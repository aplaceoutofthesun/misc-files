<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>SEBE Template</title>
<link rel="stylesheet" type="text/css" href="/content/enforced/384049-SEBE_LST_01/z-intmedia-donotedit/templates/sebe-fl.css">
<link rel="stylesheet" type="text/css" href="/content/enforced/384049-SEBE_LST_01/z-intmedia-donotedit/templates/open-source-css-and-js/prism/prism.css">
<link rel="stylesheet" type="text/css" href="/content/enforced/384049-SEBE_LST_01/z-intmedia-donotedit/templates/open-source-css-and-js/prism/prism.overrides.css">
</head>
<!-- ------------------------------------------- -->
<body class="cloudFirst">
<p><img src="../images/Exploring-and-transforming-the-data-image-1.jpeg" alt="Torus, artwork" title="Torus, artwork" style="max-width: 100%;" data-d2l-editor-default-img-style="true" /></p>
<address><a href="https://www.gettyimages.com.au" target="_blank" rel="noopener noreferrer">&copy; Getty Images</a></address>
<h5>A beautiful visualisation of a mathematical concept.</h5>
<h1>Exploring and transforming the data</h1>
<div>
<p>The first step in the following case study will be exploring the raw data and making some observations.</p>
<p>Typically the data cleaning step happens before this (hence its mention in weeks 3 and 4). But, for the purposes of demonstrating the concepts in this course, a set of data has already been prepared and cleaned for you.</p>
<p>You can download this data here:</p>
<ul>
<li><a href="https://cloudstor.aarnet.edu.au/plus/s/uZ7rFz3zmSlkomQ" target="_blank" rel="noopener noreferrer">KeiHotels.txt</a></li>
</ul>
<p><code>hotelData = read.table("KeiHotels.txt")</code></p>
<p><strong>Note</strong>&nbsp;The first column represents Kei&rsquo;s ratings, and the other columns represent the ratings of other anonymous users, who we&rsquo;ll refer to as Users 2, User 3, &hellip;, User 10 to be consistent with column numbering.</p>
<h4 id="briefing">Briefing</h4>
<p>Suppose Kei is a member of a hotel booking website and is searching for hotels to review. It will be reviewed in relation to three potential hotels each of which have been rated by other members. They have also rated a number of hotels in common with Kei. These are indicated in the final three rows of the following table.</p>
<p><strong>Note</strong>You can generate a preview (without the three final rows) using&nbsp;<code>head(hotelData)</code>.</p>
<h5><img class="centerImg" src="../images/Exploring-and-transforming-the-data-image-2.png" alt="" title="" style="max-width: 100%;" data-d2l-editor-default-img-style="true" /></h5>
<h5></h5>
<p>The recommender system wants to be able to say something like &ldquo;based on similar users, we believe you&rsquo;ll enjoy staying at Hotel X&rdquo;. To do this, we want to be able to predict Kei&rsquo;s ratings for the unvisited hotels.</p>
<h3 id="euclidean-distance">Euclidean Distance</h3>
<p>If we think of each user&rsquo;s ratings as a set (or vector) of coordinates, we can measure the distance between each set of coordinates.</p>
<p>It should then follow that those with ratings similar to Kei will have a shorter distance between their coordinates.</p>
<p>For a simplified example, consider this subset of the data (the first two rows and selected columns).</p>
<table>
<tbody>
<tr>
<td><strong>Hotel</strong></td>
<td><strong>Kei</strong></td>
<td><strong>User 2</strong></td>
<td><strong>User 4</strong></td>
<td><strong>User 6</strong></td>
</tr>
<tr>
<td>1</td>
<td style="text-align: center;">56</td>
<td style="text-align: center;">65</td>
<td style="text-align: center;">56</td>
<td style="text-align: center;">58</td>
</tr>
<tr>
<td>2</td>
<td style="text-align: center;">73</td>
<td style="text-align: center;">41</td>
<td style="text-align: center;">61</td>
<td style="text-align: center;">78</td>
</tr>
</tbody>
</table>
<p>Plotting each of these points using the R code below gives us the following graph:</p>
<div>
<div>
<pre><code class="language-r">plot(c(73, 41, 61, 78)~c(56, 65, 56, 58), xlab="User Ratings for Hotel 1", ylab="User Ratings for Hotel 2", main="Comparison of User Ratings", xlim=c(50,70), ylim=c(40,80), pch=16)
text(c(73, 41, 61, 78)~c(56, 65, 56, 58), label=c("Kei", "User 2", "User 4", "User 6"), pos=4)
</code></pre>
</div>
</div>
<p><img class="centerImg" src="../images/Exploring-and-transforming-the-data-image-3.png" alt="" title="" style="max-width: 100%;" data-d2l-editor-default-img-style="true" /></p>
<h5></h5>
<p>We can see visually that User 6&rsquo;s ratings is much closer to Kei&rsquo;s ratings for the first two hotels. We&rsquo;re naturally doing this by judging the&nbsp;<strong>Euclidean Distance</strong>&nbsp;between each of those points.</p>
<h3 id="exploring-the-data">Exploring the Data</h3>
<p>Let us now apply the above idea to the whole dataset, and we&rsquo;ll also look at the Pearson and Spearman correlations while we&rsquo;re at it.</p>
<p>The code below will generate values consistent with the table below. The values in the table have been rounded to 3 decimal places for ease of appearance.</p>
<div>
<div>
<pre><code class="language-r">euclideanValues = array(0,9)
pearsonValues = array(0,9)
spearmanValues = array(0,9)
for(i in 1:9) {
  euclideanValues[i] = dist(rbind(hotelData[,1], hotelData[,i+1]))
  pearsonValues[i] = cor(hotelData[,1], hotelData[,i+1])
  spearmanValues[i] = cor(hotelData[,1], hotelData[,i+1], method="spearman") 
}
cbind(euclideanValues, pearsonValues, spearmanValues)<br /></code></pre>
</div>
</div>
</div>
<div></div>
<table>
<tbody>
<tr style="height: 20px;">
<td style="height: 20px;">User</td>
<td style="height: 20px;">Euclidean</td>
<td style="height: 20px;">Pearson</td>
<td style="height: 20px;">Spearman</td>
</tr>
<tr style="height: 20px;">
<td style="height: 20px;">2</td>
<td style="height: 20px;">103.407</td>
<td style="height: 20px;">0.879</td>
<td style="height: 20px;">0.867</td>
</tr>
<tr style="height: 20px;">
<td style="height: 20px;">3</td>
<td style="height: 20px;">119.633</td>
<td style="height: 20px;">0.865</td>
<td style="height: 20px;">0.840</td>
</tr>
<tr style="height: 20px;">
<td style="height: 20px;">4</td>
<td style="height: 20px;">116.837</td>
<td style="height: 20px;">0.853</td>
<td style="height: 20px;">0.836</td>
</tr>
<tr style="height: 20px;">
<td style="height: 20px;">5</td>
<td style="height: 20px;">73.239</td>
<td style="height: 20px;">0.947</td>
<td style="height: 20px;">0.932</td>
</tr>
<tr style="height: 20px;">
<td style="height: 20px;">6</td>
<td style="height: 20px;">75.478</td>
<td style="height: 20px;">0.941</td>
<td style="height: 20px;">0.932</td>
</tr>
<tr style="height: 20px;">
<td style="height: 20px;">7</td>
<td style="height: 20px;">127.902</td>
<td style="height: 20px;">0.855</td>
<td style="height: 20px;">0.829</td>
</tr>
<tr style="height: 21.1602px;">
<td style="height: 21.1602px;">8</td>
<td style="height: 21.1602px;">119.105</td>
<td style="height: 21.1602px;">0.851</td>
<td style="height: 21.1602px;">0.820</td>
</tr>
<tr style="height: 20px;">
<td style="height: 20px;">9</td>
<td style="height: 20px;">94.557</td>
<td style="height: 20px;">0.921</td>
<td style="height: 20px;">0.903</td>
</tr>
<tr style="height: 20px;">
<td style="height: 20px;">10</td>
<td style="height: 20px;">107.476</td>
<td style="height: 20px;">0.886</td>
<td style="height: 20px;">0.884</td>
</tr>
</tbody>
</table>
<p>We&rsquo;re looking for lower Euclidean distances and for both Pearson &amp; Spearman correlations to be close to 1, which suggests that Users 5 and 6 are closest to Kei&rsquo;s preferences.</p>
<h4 id="transforming-the-data">Transforming the Data</h4>
<p>When determining transformations there are two goals for the purposes of making the variables better for fitting them to aggregation functions:</p>
<ol>
<li>There is a (noticable) positive linear relationship.</li>
<li>All variables share the same range (which we normalise to between&nbsp;0 and 1).</li>
</ol>
<p>Plotting scatterplots between our variable of interest and all other variables provide a convenient means of determining what transformations to make. Since all variables range between 0 and 100 and there is a positive linear relationship between Kei and all other users, we can divide all values by 100.</p>
<p><code>hotelData = hotelData/100</code></p>
<h2 id="your-task">Activity</h2>
<p>Plot histograms for each User (including Kei) to survey their tendencies in terms of distributing ratings.</p>
<ul>
<li>Which ones appear similar to Kei&rsquo;s ratings and which ones appear very different?</li>
<li>Are there any trends (e.g. tendency to give high/low ratings, but rarely in between)?</li>
</ul>
<p>Let us know your observations in the comments below!</p>
<p>We highly recommend looking through the <a href="https://link-springer-com.ezproxy-b.deakin.edu.au/book/10.1007%2F978-3-319-46762-7" target="_blank" rel="noopener noreferrer">recommended textbook</a>&nbsp;for another data analysis case study that&rsquo;ll match the steps taken in this section. From &lsquo;Chapter 5.4 Using Aggregation Models for Analysis and Prediction&rsquo; onwards, we investigate Bike Sharing data, and there is significantly more exploration and decisions made in terms of determining appropriate transformations.</p>
<p>The Bike Sharing data can be downloaded here: <a href="https://cloudstor.aarnet.edu.au/plus/s/unNg9Ou1gGmg5PF" target="_blank" rel="noopener noreferrer">BikeShare231.txt</a>.</p>
<hr />
<div style="padding-top: 20px;"><a href="#" class="navrep-button" target="_parent" title="Previous" style="padding: .5rem .5rem; font-size: 12pt; float: left;"> &lt; Previous</a> <a href="#" class="navrep-button" target="_parent" title="Next" style="padding: .5rem .5rem; font-size: 12pt; float: right;">Next &gt;</a></div>
<p style="padding-bottom: 50px;"></p>
</body>
<script defer type="text/javascript" src="/content/enforced/384049-SEBE_LST_01/z-intmedia-donotedit/templates/sebe-master.js"></script>
<script type="text/javascript" src="/content/enforced/384049-SEBE_LST_01/z-intmedia-donotedit/templates/open-source-css-and-js/prism/prism.js"></script>

<script  type="text/javascript">
function localProc(){

  console.log("");
  console.log("ready!");

 
}
</script>
<script type="text/javascript" src="/content/enforced/384049-SEBE_LST_01/z-sebe-lst-learning-design/fl-dual-delivery/js/sebe-fl-prism.js"></script>
<script type="text/javascript" src="/content/enforced/384049-SEBE_LST_01/z-intmedia-donotedit/templates/open-source-css-and-js/prism/prism.r.js"></script>
<script type="text/javascript" src="/content/enforced/384049-SEBE_LST_01/z-sebe-lst-learning-design/fl-dual-delivery/js/sebe-fl-mathjax.js"></script>
<script type="text/javascript" src="/content/enforced/384049-SEBE_LST_01/z-sebe-lst-learning-design/fl-dual-delivery/js/sebe-fl-nav.js"></script>
<script type="text/javascript" src="/content/enforced/384049-SEBE_LST_01/z-sebe-lst-learning-design/fl-dual-delivery/js/sebe-fl.js"></script>
</html>